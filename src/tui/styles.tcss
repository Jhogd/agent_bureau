/* Agent Bureau — Textual CSS
   Dark terminal theme. $variables resolve to Textual's built-in color tokens.
*/

Screen {
    background: $surface;
}

/* Root horizontal container takes remaining vertical space after docked bars and panels */
Horizontal {
    height: 1fr;
}

/* Vertical divider between panes */
#divider {
    width: 1;
    height: 1fr;
    background: $panel;
    color: $text-muted;
    content-align: center middle;
}

/* Each agent pane takes equal share of horizontal space */
AgentPane {
    width: 1fr;
    height: 1fr;
    layout: vertical;
}

/* Pane header — one line tall, dimmed when not focused */
AgentPane #header {
    height: 1;
    background: $panel-darken-1;
    color: $text-muted;
    content-align: center middle;
    padding: 0 1;
    text-style: bold;
}

/* Active pane header — highlighted when pane has focus */
AgentPane:focus #header {
    background: $accent-darken-1;
    color: $text;
}

/* Loading spinner fills the pane body while waiting for first token */
AgentPane LoadingIndicator {
    height: 1fr;
    background: transparent;
}

/* RichLog content area fills remaining height */
AgentPane #content {
    height: 1fr;
    padding: 0 1;
}

/* Placeholder text — centered, dimmed, fills available space */
AgentPane #placeholder {
    color: $text-disabled;
    content-align: center middle;
    height: 1fr;
}

/* Quit confirmation dialog */
QuitScreen {
    align: center middle;
}

#dialog {
    grid-size: 2;
    grid-gutter: 1 2;
    grid-rows: 1fr 3;
    padding: 0 1;
    width: 60;
    height: 11;
    border: thick $background 80%;
    background: $surface;
}

#question {
    column-span: 2;
    height: 1fr;
    width: 1fr;
    content-align: center bottom;
}

/* ===== Phase 3 additions ===== */

/* Status bar — one line at the very top, above agent panes */
#status-bar {
    height: 1;
    background: $panel-darken-2;
    color: $text-muted;
    content-align: left middle;
    padding: 0 1;
    dock: top;
}

/* Prompt input bar — three lines at the bottom, visually distinct from panes */
#prompt-bar {
    height: 3;
    dock: bottom;
    background: $panel-darken-1;
    padding: 1 1;
}

#prompt-bar Input {
    background: $panel-darken-1;
    border: none;
    height: 1;
    color: $text;
}

/* Disagreement highlight — pane header changes color when agents disagree */
AgentPane.disagreement #header {
    background: $warning-darken-1;
    color: $text;
}

/* ─── Phase 4: Flow Control and Code Apply ──────────────────────────────── */

ApplyConfirmScreen {
    align: center middle;
    background: rgba(0, 0, 0, 0.5);
}

ApplyConfirmScreen #apply-dialog {
    width: 65;
    height: 7;
    background: $surface;
    border: thick $background 80%;
    padding: 1 2;
}
